#!/usr/bin/env genome-perl

BEGIN {
      $ENV{UR_DBI_NO_COMMIT} = 1;
      $ENV{UR_USE_DUMMY_AUTOGENERATED_IDS} = 1;
      $ENV{NO_LSF} = 1;
}

use strict;
use warnings;

use above "Genome";

use Test::More tests => 4;
use Genome::Utility::Test 'compare_ok';

my $pkg = "Genome::Model::Tools::Picard::BedToIntervalList";
use_ok($pkg);

my $test_dir = __FILE__.".d";

my $picard_version = '1.123';

my $bed_file = $test_dir .'/random_sorted.bed';
my $seqdict = $test_dir .'/seqdict.sam';

my $expected_interval_file = $test_dir .'/expected_interval_list';

my $observed_interval_file = Genome::Sys->create_temp_file_path();

my $cmd = Genome::Model::Tools::Picard::BedToIntervalList->create(
   input => $bed_file,
   sequence_dictionary => $seqdict,
   output => $observed_interval_file,
   use_version => $picard_version,
);

ok($cmd,'create BedToIntervalList command');
ok($cmd->execute, 'execute BedToIntervalList command');

compare_ok($expected_interval_file, $observed_interval_file, 'output is correct');
